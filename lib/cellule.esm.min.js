var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),bindEventHandlerToFsmObject=function(t,e){return function(r,n,o){var i=function(t){n.push(t)},u=t(i,o);if(u&&u!==r){for(var a=r,f=void 0,c=new Set([r]);u&&u!==a;){if("string"!=typeof u)throw Error("Statuses must be strings");if(!e[u])throw Error("Cannot complete transition. Unknown status value");if(u&&c.has(u))throw Error("Loop detected while transitioning from status:"+a+" to status:"+u);c.add(u),u!==a&&a===r&&e[a].$exit&&(f=e[a].$exit(i,u,o));var l=a;(a=u)!==l&&e[a].$enter&&(u=e[u].$enter(i,l,o,f))}return[u||a,n]}return[r,n]}},createStatusEntry=function(t,e,r,n){var o=n?Object.create(n):{};return o.event=function(e,r){return o["$"+e](t,[],r)},Object.entries(e).reduce(function(e,n){var o=_slicedToArray(n,2),i=o[0],u=o[1];if("event"===i)throw Error('The key "event" is reserved. Erroneously defined in "'+t+'"');return"$"===i[0]?["$enter","$exit"].includes(i)?Object.defineProperty(e,i,{value:u}):Object.defineProperty(e,i,{value:bindEventHandlerToFsmObject(u,r)}):e[i]=u,e},o)},cellule=function(t){if("object"!==(void 0===t?"undefined":_typeof(t)))throw Error("Must provide an object type for the description argument");var e={},r=t.$default?createStatusEntry("$default",t.$default,e):void 0;return r&&(e.$default=r),Object.entries(t).reduce(function(t,e){var n=_slicedToArray(e,2),o=n[0],i=n[1];return"object"===(void 0===i?"undefined":_typeof(i))&&"$default"!==o&&(t[o]=createStatusEntry(o,i,t,r)),t},e)};export default cellule;
